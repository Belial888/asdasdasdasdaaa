<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        body { font-family: 'Verdana', sans-serif; margin: 0; padding: 0; background-color: #f8f9fa; color: #000; }
        header { background-color: #8B0000; color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .container { max-width: 1000px; margin: 20px auto; padding: 20px; }
        .section-title { border-bottom: 3px solid #333; padding-bottom: 10px; margin-top: 40px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: white; }
        th, td { border: 1px solid #000; padding: 12px; text-align: left; }
        th { background-color: #333; color: white; }
        .btn { padding: 8px 12px; cursor: pointer; border: none; font-weight: bold; margin-right: 5px; color: white;}
        .btn-approve { background-color: #006400; }
        .btn-cancel { background-color: #b00; }
        form { display: inline; }
    </style>
</head>
<body>

    <header>
        <h1>Admin Console</h1>
        <div>
            <span>Administrator Mode</span> | <a href="/logout" style="color: white;">Logout</a>
        </div>
    </header>

    <div class="container">
        
        <!-- Pending Requests -->
        <h2 class="section-title">‚ö†Ô∏è Pending Approval Requests</h2>
        <table>
            <thead>
                <tr>
                    <th>Patient Name</th>
                    <th>PWD ID</th>
                    <th>Date & Time</th>
                    <th>Purpose</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for appt in pending %}
                <tr>
                    <td>{{ appt.full_name }}</td>
                    <td>{{ appt.pwd_id_number }}</td>
                    <td>{{ appt.appointment_date }} @ {{ appt.appointment_time }}</td>
                    <td>{{ appt.purpose }}</td>
                    <td>
                        <form action="/update_status" method="POST">
                            <input type="hidden" name="appointment_id" value="{{ appt.appointment_id }}">
                            <button type="submit" name="status" value="Approved" class="btn btn-approve">Approve</button>
                        </form>
                        <form action="/update_status" method="POST">
                            <input type="hidden" name="appointment_id" value="{{ appt.appointment_id }}">
                            <button type="submit" name="status" value="Cancelled" class="btn btn-cancel">Reject</button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr><td colspan="5">No pending requests.</td></tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Confirmed Schedule -->
        <h2 class="section-title">üìã Confirmed Schedule</h2>
        <table>
            <thead>
                <tr>
                    <th>Date & Time</th>
                    <th>Patient</th>
                    <th>Purpose</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for appt in schedule %}
                <tr>
                    <td>{{ appt.appointment_date }} @ {{ appt.appointment_time }}</td>
                    <td>{{ appt.full_name }}</td>
                    <td>{{ appt.purpose }}</td>
                    <td style="color: green; font-weight:bold;">{{ appt.status }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
</body>
</html>